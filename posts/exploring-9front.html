<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Exploring 9front and Plan 9</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/style.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
<div id="preamble" class="status">
<hr style="border-top: 1px solid black;">
<div class='topnav' style='display: flex; justify-content: space-between; align-items: center;'>
  <a href="/index.html"><h2 style='margin-top: 0; margin-bottom: 0; margin-left:0px;'>mblognl</h2></a>
  <div>
    <a href='/about.html' style='font-weight:bold; font-style:italic;'>About Me</a> |
    <a href='/archive.html' style='font-weight:bold; font-style:italic;'>Blog</a> |
    <a href='/books.html' style='font-weight:bold; font-style:italic;'>Books</a> |
    <a href='/rss.xml' style='font-weight:bold; font-style:italic;'>RSS</a>
  </div>
</div>
<hr style="border-top: 1px solid black;">
</div>
<div id="content" class="content">
<header>
<h1 class="title">Exploring 9front and Plan 9</h1>
</header>
<div id="outline-container-orgbcbb611" class="outline-2">
<h2 id="orgbcbb611">Why 9front?</h2>
<div class="outline-text-2" id="text-orgbcbb611">

<figure id="orgf6c27bd">
<img src="http://9front.org/img/thistimedefinitely.front.png" alt="thistimedefinitely.front.png" style="float:left; margin-right: 15px; vertical-align: bottom;" width="200px">

</figure>

<p>
Over the holiday period I took the steps towards fully exploring the 9front/Plan 9 ecosystem. It has turned up on the radar for some time now, however if my memory treats me correctly, the first exposure I was overwhelmed. Recently I discovered <a href="https://www.youtube.com/channel/UC7qFfPYl0t8Cq7auyblZqxA">adventuresin9</a> YouTube channel randomly which sprouted the interest again. After trying out 9front on VM via Proxmox I decided that I needed to experience it on bare metal.
</p>

<p>
This led to a couple of quests with older laptops to bring them back to life in order to get them running this lesser known OS.
</p>

<p>
There was something about the stark, minimalist approach, the art on the cover of the purchased manual, and the general demeanour of the contributors that hooked me. It's hard to explain but I liken it to finding a band you'd never heard of from a past era and then finding out they have a sprawling back catalogue to digest.
</p>

<p>
Also, with my interest in the C language, finding out that 9front has it's own dialect and that the whole OS is written in less than 6000 lines I felt this may be a place to learn about operating system architecture and kernels etc
This space will evolve as I experiment, explore, and expand my knowledge.
</p>
</div>
</div>
<div id="outline-container-org8fde2bf" class="outline-2">
<h2 id="org8fde2bf">What have I done so far?</h2>
<div class="outline-text-2" id="text-org8fde2bf">
<p>
Here is a list of the hardware I've managed to get 9front to run on:
</p>
</div>

<div id="outline-container-orgfa85ab7" class="outline-3">
<h3 id="orgfa85ab7">Thinkpad T420:</h3>
<div class="outline-text-3" id="text-orgfa85ab7">

<figure id="org68aa25b">
<img src="../img/thinkpad.jpg" alt="thinkpad.jpg" style="float:left; margin-right: 15px; vertical-align: bottom;" width="200px">

</figure>

<p>
I found one of these laptops on Facebook marketplace for Â£10 including the power adaptor. Initial thoughts was that the hardware was in pretty good condition given the age. However the laptop did not boot. I would get the initial green power led but then nothing. After searching online and diving into a variety of vintage posts I came to the conclusion that the system board must be kaput.
</p>

<p>
Luckily replacement parts for this model is still readily available on eBay etc. so I ordered a new motherboard from Latvia. This took a couple of weeks to arrive and once received I was eager to give it a crack
</p>

<p>
I have experience in fixing 'things' but this was my first laptop motherboard replacement. Once observation that really sticks out is the ease of replacing components in these devices. In more recent laptops I've opened up they seem difficult to get to the 'guts'. The whole replacement took about an hour from scratch and I only had 2 leftover screws!
</p>

<p>
The laptop understandably was missing a sdd so I added my own Kingston 120gb. There was an extra 4gb RAM in the 2nd port which gives the laptop 8gb in total.
</p>

<p>
The install is covered below and mostly I followed <a href="https://9lab.org/plan9/thinkpad-t420s/">9lab Thinkpad T420 guide</a> this helped with the wifi firmware and getting the initial boot working. Key benefit was getting the firmware:
</p>

<pre class="example">
% ramfs ; cd /tmp
% hget -o iwn-firmware-5.11p1.tgz \
  http://firmware.openbsd.org/firmware/6.9/iwn-firmware-5.11p1.tgz
% tar xzf iwn-firmware-5.11p1.tgz
% cp firmware/iwn-6005 /lib/firmware
</pre>

<p>
Once booted and I followed the install guide, running <code>inst/start</code> and following the prompts, it was pretty straightforward. I didn't sway from the defaults for this laptop, using the default fs and partition suggestions.
</p>
</div>
</div>

<div id="outline-container-orgc2f72c2" class="outline-3">
<h3 id="orgc2f72c2">Raspberry Pi 3b</h3>
<div class="outline-text-3" id="text-orgc2f72c2">
<p>
I installed 9front on a Raspberry Pi 3b which is running 9front successfully. There was a couple of guides that helped along the way:
</p>

<ul class="org-ul">
<li><a href="https://luksamuk.codes/posts/plan9-setup-rpi.html">Plan 9: Setting up 9front on a Raspberry Pi</a></li>
<li><a href="https://julienblanchard.com/posts/setting-up-a-9front-cpu-server-on-a-raspberry-pi-4.html">Setting up a 9front CPU server on a Raspberry Pi 4</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org593a822" class="outline-2">
<h2 id="org593a822">Next Steps</h2>
<div class="outline-text-2" id="text-org593a822">
</div>
<div id="outline-container-orgcce285f" class="outline-3">
<h3 id="orgcce285f">Connect to wifi</h3>
<div class="outline-text-3" id="text-orgcce285f">
<div class="org-src-container">
<pre class="src src-rc">bind -a '#l1' /net
aux/wpa -s &lt;SSID&gt; -p /net/ether1
# Enter password when prompted...
ip/ipconfig
</pre>
</div>

<p>
To test connectivity you can try: <code>ip/ping 8.8.8.8</code> for example and you should get a positive response.
</p>

<p>
I then moved to something more reliable that I got from the 9lab guide above. The script runs on boot and you can choose to fix to an SSID or skip to desktop.
</p>

<p>
Note: If you get the password incorrect you're going to see a DHCP error. So far my only way to reset this is to <code>fshalt -r</code> reboot the system and try again, this is super annoying when you have a dodgy key char in the password. ðŸ« 
</p>
</div>
</div>

<div id="outline-container-org9fbdb5d" class="outline-3">
<h3 id="org9fbdb5d">Man Pages</h3>
<div class="outline-text-3" id="text-org9fbdb5d">
<p>
<a href="https://man.9front.org/">man.9front.org</a>
</p>

<p>
This is the way to read about built in functions, commands and applications. I use <code>lookman</code> a lot to find words in man pages and then load the page by <code>man &lt;subject&gt;</code> for example:
</p>

<p>
<code>man wpa</code>
</p>

<p>
returns:
</p>

<pre class="example">
WPA(8)                                                     WPA(8)

NAME
     wpa - Wi-Fi Protected Access setup

SYNOPSIS
     aux/wpa [ -dp12 ] [ -s essid ] dev

DESCRIPTION
     Wpa handles the authentication and key exchange with WPA
     protected wireless networks.

     The dev parameter specifies the network interface that needs
     to be setup with WPA.  The essid can be set with the -s
     option. Otherwise, the previously configured essid on the
     interface will be used.  The -p option will prompt and
     install the preshared key or pap/chap credentials into fac-
     totum, otherwise the key has to be already present in facto-
     tum or an interactive key prompter like auth/fgui (see
     factotum(4)) needs to provide it.

     The authentication protocol is initiated by the wireless
     access point so wpa will background itself after the
     keyprompt and establish the encryption automatically as
     needed.  The optional -1 or -2 arguments can be used to
     select between WPA1/TKIP (default) or WPA2/CCMP encryption
     with WPA PSK.

     The -d option enables debugging and causes wpa to stay in
     foreground writing protocol messages to standard error.

EXAMPLES
     Setup wireless encryption:
     % bind -a '#l1' /net
     % aux/wpa -s 9HAL -p /net/ether1
     !Adding key: proto=wpapsk essid=9HAL
     password: *****
     !
     % ip/ipconfig ether /net/ether1

SOURCE
     /sys/src/cmd/aux/wpa.c

SEE ALSO
     factotum(4), ipconfig(8)

HISTORY
     Wpa first appeared in 9front (March, 2013).
</pre>

<p>
As you can see, the man pages are well structured and thorough.
</p>
</div>
</div>

<div id="outline-container-orgeca46a0" class="outline-3">
<h3 id="orgeca46a0">USB Storage</h3>
<div class="outline-text-3" id="text-orgeca46a0">
<p>
The USB storage mounts on <code>/shr/&lt;device-name&gt;</code> and I moved the files straight from there. I think there may be mount option just like Linux/Unix but I've not worked that out but there is a man mapge.
</p>
</div>
</div>

<div id="outline-container-org9909a10" class="outline-3">
<h3 id="org9909a10">Uxn</h3>
<div class="outline-text-3" id="text-org9909a10">
<p>
I wanted to explore that ecosystem from within 9front. If you've not come across Uxn/HundredRabbits please check them out.
</p>
</div>
</div>

<div id="outline-container-org6d5d981" class="outline-3">
<h3 id="org6d5d981">Web Browsing</h3>
<div class="outline-text-3" id="text-org6d5d981">
<p>
I have installed <a href="https://github.com/netsurf-plan9/nsport">Netsurf</a> (the alternative browser) and there is also Mothra which is really cool. Both provide very minimal web experiences, with Mothra not supporting any JS or 'modern' browsing experiences. To be fair, most of my browsing is reading code or docs/blogs which render fine. I even checked out this blog which translates really well.
</p>
</div>
</div>
</div>

<div id="outline-container-orgb2a2260" class="outline-2">
<h2 id="orgb2a2260">Future</h2>
</div>

<div id="outline-container-orgd85a599" class="outline-2">
<h2 id="orgd85a599">Useful Resources</h2>
<div class="outline-text-2" id="text-orgd85a599">
<ul class="org-ul">
<li><a href="https://www.youtube.com/channel/UC7qFfPYl0t8Cq7auyblZqxA">adventuresin9</a> (YouTube)</li>
<li><a href="https://9p.io/wiki/plan9/plan_9_wiki/">Plan 9 wiki</a></li>
<li><a href="https://9front.org/">9 front</a></li>
<li><a href="https://www.amazon.co.uk/s?k=9front&amp;crid=132YLI7HQ5LJN&amp;sprefix=9front%2Caps%2C88&amp;ref=nb_sb_noss">Amazon 9front manuals</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<div class="postamble" style="text-align: center; margin-top: 20px; margin-bottom: 20px;"> 
               <p> Created by <a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.3 (<a href="https://orgmode.org">Org</a> mode 9.6.15)  </p>
               </div>
</div>
</body>
</html>
