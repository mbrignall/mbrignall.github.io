<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs with aspell/ispell on Nix Darwin</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/stylesheet.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">Emacs with aspell/ispell on Nix Darwin</h1>
</header><div id="outline-container-org6ee2b0b" class="outline-2">
<h2 id="org6ee2b0b">British English and Emacs</h2>
<div class="outline-text-2" id="text-org6ee2b0b">
<div class="PREVIEW" id="orgc5d82ad">
<p>
I like writing and was keen to introduce an on-the-fly spellchecker in Emacs. Ispell is built in to the current version I'm using (29.1). However it was locked to the default US dictionary. Easy fix right?
</p>

</div>
</div>
<div id="outline-container-orgcc25fc8" class="outline-3">
<h3 id="orgcc25fc8">Discoveries</h3>
<div class="outline-text-3" id="text-orgcc25fc8">
<p>
Out the box the latest version of ispell on Nix Packages and built in Emacs does not have UK/British English default. So I started looking on Reddit and Googled ispell and Nix to see where I could go.
</p>
</div>
</div>
<div id="outline-container-org2d8fb9d" class="outline-3">
<h3 id="org2d8fb9d">Emacs philosophy and approach</h3>
<div class="outline-text-3" id="text-org2d8fb9d">
<p>
I am a strong believer in keeping things simple and with the introduction of 'use-package' and the extra features in 29.1 I was keen to rewrite my config and use as close to vanilla setup as possible. I took the very base of what was needed and started from scratch building outward and exploring built-in packages. My config file is available here: <a href="https://github.com/mbrignall/nix-darwin">nix-darwin repo</a>
</p>
</div>
</div>
<div id="outline-container-org03fd189" class="outline-3">
<h3 id="org03fd189">Emacs Aspell/Ispell config</h3>
<div class="outline-text-3" id="text-org03fd189">
<p>
Add this to your <code>init.el</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Spellcheck
</span>(<span class="org-keyword">require</span> '<span class="org-constant">ispell</span>)
(<span class="org-keyword">setq</span> ispell-program-name <span class="org-string">"aspell"</span>)

(<span class="org-keyword">dolist</span> (hook '(text-mode-hook))
  (add-hook hook (<span class="org-keyword">lambda</span> () (flyspell-mode 1))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org6c882e9" class="outline-3">
<h3 id="org6c882e9">NixOS/ Nix Darwin</h3>
<div class="outline-text-3" id="text-org6c882e9">
<p>
With the emphasis on declarative, reproducible systems, I've been using Nix for some time now. I have a config for Linux/NixOS outside of work, when at work I use a Macbook so have a Nix Darwin build for that. The addition of <code>aspell</code> with dictionaries was surprisingly simple once I'd worked out how to declare it in my configuration file:
</p>

<p>
<pre class="src src-nix">
<span class="org-comment-delimiter"># </span><span class="org-comment">System Packages</span>
<span class="org-keyword">environment.systemPackages</span> = with <span class="org-constant">pkgs</span>; [
<span class="org-comment-delimiter">  # </span><span class="org-comment">Applications</span>
  (<span class="org-keyword">aspellWithDicts</span> (<span class="org-constant">dicts:</span> with dicts; <span class="org-string">[ en en-computers en-science ]</span>))
<span class="org-constant">  ispell</span>
<span class="org-comment-delimiter">  # </span><span class="org-comment">Other Packages</span>
];</pre>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<div class="postamble">
               <p> Created by <a href="https://www.gnu.org/software/emacs/">Emacs</a> 30.1 (<a href="https://orgmode.org">Org</a> mode 9.7.11)  </p>
               </div>
</div>
</body>
</html>
